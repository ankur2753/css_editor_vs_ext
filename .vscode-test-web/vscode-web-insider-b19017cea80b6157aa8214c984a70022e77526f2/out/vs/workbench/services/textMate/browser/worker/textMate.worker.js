/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var W=["require","exports","vs/base/common/lifecycle","vs/base/common/observableImpl/logging","vs/base/common/platform","vs/base/common/observableImpl/base","vs/base/common/errors","vs/editor/common/tokens/lineTokens","vs/base/common/observableImpl/autorun","vs/base/common/observableImpl/derived","vs/base/common/observable","vs/base/common/buffer","vs/editor/common/core/eolCounter","vs/editor/common/encodedTokenAttributes","vs/editor/common/core/lineRange","vs/editor/common/tokens/contiguousMultilineTokensBuilder","vs/base/common/uri","vs/base/common/resources","vs/base/common/async","vs/editor/common/languages/nullTokenize","vs/base/common/observableImpl/utils","vs/base/common/stream","vs/base/common/symbols","vs/editor/common/model/fixedArray","vs/base/common/arrays","vs/editor/common/tokens/contiguousTokensEditing","vs/editor/common/tokens/contiguousMultilineTokens","vs/base/common/extpath","vs/base/common/path","vs/base/common/strings","vs/base/common/network","vs/base/common/event","vs/editor/common/languages","vs/editor/common/model/textModelTokens","vs/workbench/services/textMate/browser/tokenizationSupport/textMateTokenizationSupport","vs/workbench/services/textMate/browser/tokenizationSupport/tokenizationSupportWithLineLimit","vs/workbench/services/textMate/common/TMScopeRegistry","vs/workbench/services/textMate/common/TMGrammarFactory","vs/workbench/services/textMate/browser/worker/textMateWorkerModel","vs/editor/common/core/position","vs/base/common/types","vs/base/common/cancellation","vs/base/common/stopwatch","vs/editor/common/core/offsetRange","vs/editor/common/model/mirrorTextModel","vscode-textmate","vs/workbench/services/textMate/browser/worker/textMate.worker"],p=function(F){for(var e=[],E=0,k=F.length;E<k;E++)e[E]=W[F[E]];return e};define(W[3],p([0,1]),function(F,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConsoleObservableLogger=e.getLogger=e.setLogger=void 0;let E;function k(s){E=s}e.setLogger=k;function T(){return E}e.getLogger=T;class L{constructor(){this.a=0,this.d=new WeakMap}b(c){return n([u(w("|  ",this.a)),c])}c(c){return c.didChange?[u(" "),i(r(c.oldValue,70),{color:"red",strikeThrough:!0}),u(" "),i(r(c.newValue,60),{color:"green"})]:[u(" (unchanged)")]}handleObservableChanged(c,O){console.log(...this.b([t("observable value changed"),i(c.debugName,{color:"BlueViolet"}),...this.c(O)]))}formatChanges(c){if(c.size!==0)return i(" (changed deps: "+[...c].map(O=>O.debugName).join(", ")+")",{color:"gray"})}handleDerivedCreated(c){const O=c.handleChange;this.d.set(c,new Set),c.handleChange=(C,U)=>(this.d.get(c).add(C),O.apply(c,[C,U]))}handleDerivedRecomputed(c,O){const C=this.d.get(c);console.log(...this.b([t("derived recomputed"),i(c.debugName,{color:"BlueViolet"}),...this.c(O),this.formatChanges(C)])),C.clear()}handleFromEventObservableTriggered(c,O){console.log(...this.b([t("observable from event triggered"),i(c.debugName,{color:"BlueViolet"}),...this.c(O)]))}handleAutorunCreated(c){const O=c.handleChange;this.d.set(c,new Set),c.handleChange=(C,U)=>(this.d.get(c).add(C),O.apply(c,[C,U]))}handleAutorunTriggered(c){const O=this.d.get(c);console.log(...this.b([t("autorun"),i(c.debugName,{color:"BlueViolet"}),this.formatChanges(O)])),O.clear()}handleBeginTransaction(c){let O=c.getDebugName();O===void 0&&(O=""),console.log(...this.b([t("transaction"),i(O,{color:"BlueViolet"})])),this.a++}handleEndTransaction(){this.a--}}e.ConsoleObservableLogger=L;function n(s){const c=new Array,C={};let U="";function R(f){if("length"in f)for(const b of f)b&&R(b);else"text"in f?(U+=`%c${f.text}`,c.push(f.style),f.data&&Object.assign(C,f.data)):"data"in f&&Object.assign(C,f.data)}R(s);const y=[U,...c];return Object.keys(C).length>0&&y.push(C),y}function u(s){return i(s,{color:"black"})}function t(s){return i(h(`${s}: `,10),{color:"black",bold:!0})}function i(s,c={color:"black"}){function O(U){return Object.entries(U).reduce((R,[y,f])=>`${R}${y}:${f};`,"")}const C={color:c.color};return c.strikeThrough&&(C["text-decoration"]="line-through"),c.bold&&(C["font-weight"]="bold"),{text:s,style:O(C)}}function r(s,c){switch(typeof s){case"number":return""+s;case"string":return s.length+2<=c?`"${s}"`:`"${s.substr(0,c-7)}"+...`;case"boolean":return s?"true":"false";case"undefined":return"undefined";case"object":return s===null?"null":Array.isArray(s)?a(s,c):v(s,c);case"symbol":return s.toString();case"function":return`[[Function${s.name?" "+s.name:""}]]`;default:return""+s}}function a(s,c){let O="[ ",C=!0;for(const U of s){if(C||(O+=", "),O.length-5>c){O+="...";break}C=!1,O+=`${r(U,c-O.length)}`}return O+=" ]",O}function v(s,c){let O="{ ",C=!0;for(const[U,R]of Object.entries(s)){if(C||(O+=", "),O.length-5>c){O+="...";break}C=!1,O+=`${U}: ${r(R,c-O.length)}`}return O+=" }",O}function w(s,c){let O="";for(let C=1;C<=c;C++)O+=s;return O}function h(s,c){for(;s.length<c;)s+=" ";return s}}),define(W[8],p([0,1,2,3]),function(F,e,E,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.autorunDelta=e.AutorunObserver=e.autorunWithStore=e.autorunHandleChanges=e.autorun=void 0;function T(i,r){return new u(i,r,void 0)}e.autorun=T;function L(i,r,a){return new u(i,a,r.handleChange)}e.autorunHandleChanges=L;function n(i,r){const a=new E.DisposableStore,v=T(r,w=>{a.clear(),i(w,a)});return(0,E.toDisposable)(()=>{v.dispose(),a.dispose()})}e.autorunWithStore=n;class u{get dependencies(){return this.c}constructor(r,a,v){this.debugName=r,this.e=a,this.f=v,this.needsToRun=!0,this.a=0,this.b=!1,this.c=new Set,this.d=new Set,(0,k.getLogger)()?.handleAutorunCreated(this),this.g()}subscribeTo(r){this.b||(this.c.add(r),this.d.delete(r)||r.addObserver(this))}handleChange(r,a){const v=this.f?this.f({changedObservable:r,change:a,didChange:w=>w===r}):!0;this.needsToRun=this.needsToRun||v,this.a===0&&this.g()}beginUpdate(){this.a++}endUpdate(){this.a--,this.a===0&&this.g()}g(){if(!this.needsToRun)return;const r=this.d;this.d=this.c,this.c=r,this.needsToRun=!1,(0,k.getLogger)()?.handleAutorunTriggered(this);try{this.e(this)}finally{for(const a of this.d)a.removeObserver(this);this.d.clear()}}dispose(){this.b=!0;for(const r of this.c)r.removeObserver(this);this.c.clear()}toString(){return`Autorun<${this.debugName}>`}}e.AutorunObserver=u,function(i){i.Observer=u}(T=e.autorun||(e.autorun={}));function t(i,r,a){let v;return T(i,w=>{const h=r.read(w),s=v;v=h,a({lastValue:s,newValue:h})})}e.autorunDelta=t}),define(W[5],p([0,1,3]),function(F,e,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DisposableObservableValue=e.disposableObservableValue=e.ObservableValue=e.observableValue=e.TransactionImpl=e.getFunctionName=e.transaction=e.BaseObservable=e.ConvenientObservable=e._setDerived=void 0;let k;function T(h){k=h}e._setDerived=T;class L{get TChange(){return null}read(s){return s?.subscribeTo(this),this.get()}map(s){return k(()=>{const c=t(s);return c!==void 0?c:`${this.debugName} (mapped)`},c=>s(this.read(c),c))}}e.ConvenientObservable=L;class n extends L{constructor(){super(...arguments),this.a=new Set}addObserver(s){const c=this.a.size;this.a.add(s),c===0&&this.b()}removeObserver(s){this.a.delete(s)&&this.a.size===0&&this.c()}b(){}c(){}}e.BaseObservable=n;function u(h,s){const c=new i(h,s);try{(0,E.getLogger)()?.handleBeginTransaction(c),h(c)}finally{c.finish(),(0,E.getLogger)()?.handleEndTransaction()}}e.transaction=u;function t(h){const s=h.toString(),O=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(s);return(O?O[1]:void 0)?.trim()}e.getFunctionName=t;class i{constructor(s,c){this.b=s,this.c=c,this.a=[]}getDebugName(){return this.c?this.c():t(this.b)}updateObserver(s,c){this.a.push({observer:s,observable:c}),s.beginUpdate(c)}finish(){const s=this.a;this.a=null;for(const{observer:c,observable:O}of s)c.endUpdate(O)}}e.TransactionImpl=i;function r(h,s){return new a(h,s)}e.observableValue=r;class a extends n{constructor(s,c){super(),this.debugName=s,this.d=c}get(){return this.d}set(s,c,O){if(this.d===s)return;if(!c){u(U=>{this.set(s,U,O)},()=>`Setting ${this.debugName}`);return}const C=this.d;this.e(s),(0,E.getLogger)()?.handleObservableChanged(this,{oldValue:C,newValue:s,change:O,didChange:!0});for(const U of this.a)c.updateObserver(U,this),U.handleChange(this,O)}toString(){return`${this.debugName}: ${this.d}`}e(s){this.d=s}}e.ObservableValue=a;function v(h,s){return new w(h,s)}e.disposableObservableValue=v;class w extends a{e(s){this.d!==s&&(this.d&&this.d.dispose(),this.d=s)}dispose(){this.d?.dispose()}}e.DisposableObservableValue=w}),define(W[9],p([0,1,5,3]),function(F,e,E,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Derived=e.derived=void 0;function T(n,u){return new L(n,u)}e.derived=T,(0,E._setDerived)(T);class L extends E.BaseObservable{get dependencies(){return this.i}get debugName(){return typeof this.k=="function"?this.k():this.k}constructor(u,t){super(),this.k=u,this.l=t,this.e=!1,this.f=!1,this.g=void 0,this.h=0,this.i=new Set,this.j=new Set,(0,k.getLogger)()?.handleDerivedCreated(this)}c(){this.f=!1,this.e=!1,this.g=void 0;for(const u of this.i)u.removeObserver(this);this.i.clear()}get(){if(this.a.size===0){const u=this.l(this);return this.c(),u}if(this.h>0&&this.f){for(const u of this.i)if(u.get(),!this.f)break}if(!this.f){const u=this.j;this.j=this.i,this.i=u;const t=this.g;try{this.g=this.l(this)}finally{for(const r of this.j)r.removeObserver(this);this.j.clear()}this.f=!0;const i=this.e&&t!==this.g;if((0,k.getLogger)()?.handleDerivedRecomputed(this,{oldValue:t,newValue:this.g,change:void 0,didChange:i}),i)for(const r of this.a)r.handleChange(this,void 0)}return this.g}beginUpdate(){if(this.h===0)for(const u of this.a)u.beginUpdate(this);this.h++}handleChange(u,t){this.f&&(this.e=!0,this.f=!1),this.h===0&&this.a.size>0&&this.get()}endUpdate(){if(this.h--,this.h===0){this.a.size>0&&this.get();for(const u of this.a)u.endUpdate(this)}}subscribeTo(u){this.i.add(u),this.j.delete(u)||u.addObserver(this)}toString(){return`LazyDerived<${this.debugName}>`}}e.Derived=L}),define(W[20],p([0,1,2,8,5,9,3]),function(F,e,E,k,T,L,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.derivedObservableWithWritableCache=e.derivedObservableWithCache=e.keepAlive=e.wasEventTriggeredRecently=e.debouncedObservable=e.observableSignal=e.observableSignalFromEvent=e.FromEventObservable=e.observableFromEvent=e.waitForState=e.observableFromPromise=e.constObservable=void 0;function u(b){return new t(b)}e.constObservable=u;class t extends T.ConvenientObservable{constructor(m){super(),this.a=m}get debugName(){return this.toString()}get(){return this.a}addObserver(m){}removeObserver(m){}toString(){return`Const: ${this.a}`}}function i(b){const m=(0,T.observableValue)("promiseValue",{});return b.then(I=>{m.set({value:I},void 0)}),m}e.observableFromPromise=i;function r(b,m){return new Promise(I=>{let B=!1,d=!1;const g=(0,k.autorun)("waitForState",l=>{const A=b.read(l);m(A)&&(B?g.dispose():d=!0,I(A))});B=!0,d&&g.dispose()})}e.waitForState=r;function a(b,m){return new v(b,m)}e.observableFromEvent=a;class v extends T.BaseObservable{constructor(m,I){super(),this.h=m,this.i=I,this.f=!1,this.l=B=>{const d=this.i(B),g=!this.f||this.e!==d;(0,n.getLogger)()?.handleFromEventObservableTriggered(this,{oldValue:this.e,newValue:d,change:void 0,didChange:g}),g&&(this.e=d,this.f&&(0,T.transaction)(l=>{for(const A of this.a)l.updateObserver(A,this),A.handleChange(this,void 0)},()=>{const l=this.j();return"Event fired"+(l?`: ${l}`:"")}),this.f=!0)}}j(){return(0,T.getFunctionName)(this.i)}get debugName(){const m=this.j();return"From Event"+(m?`: ${m}`:"")}b(){this.g=this.h(this.l)}c(){this.g.dispose(),this.g=void 0,this.f=!1,this.e=void 0}get(){return this.g?(this.f||this.l(void 0),this.e):this.i(void 0)}}e.FromEventObservable=v,function(b){b.Observer=v}(a=e.observableFromEvent||(e.observableFromEvent={}));function w(b,m){return new h(b,m)}e.observableSignalFromEvent=w;class h extends T.BaseObservable{constructor(m,I){super(),this.debugName=m,this.f=I,this.h=()=>{(0,T.transaction)(B=>{for(const d of this.a)B.updateObserver(d,this),d.handleChange(this,void 0)},()=>this.debugName)}}b(){this.e=this.f(this.h)}c(){this.e.dispose(),this.e=void 0}get(){}}function s(b){return new c(b)}e.observableSignal=s;class c extends T.BaseObservable{constructor(m){super(),this.debugName=m}trigger(m){if(!m){(0,T.transaction)(I=>{this.trigger(I)},()=>`Trigger signal ${this.debugName}`);return}for(const I of this.a)m.updateObserver(I,this),I.handleChange(this,void 0)}get(){}}function O(b,m,I){const B=(0,T.observableValue)("debounced",void 0);let d;return I.add((0,k.autorun)("debounce",g=>{const l=b.read(g);d&&clearTimeout(d),d=setTimeout(()=>{(0,T.transaction)(A=>{B.set(l,A)})},m)})),B}e.debouncedObservable=O;function C(b,m,I){const B=(0,T.observableValue)("triggeredRecently",!1);let d;return I.add(b(()=>{B.set(!0,void 0),d&&clearTimeout(d),d=setTimeout(()=>{B.set(!1,void 0)},m)})),B}e.wasEventTriggeredRecently=C;function U(b){const m=new R;return b.addObserver(m),(0,E.toDisposable)(()=>{b.removeObserver(m)})}e.keepAlive=U;class R{beginUpdate(m){}handleChange(m,I){}endUpdate(m){}}function y(b,m){let I;return(0,L.derived)(b,d=>(I=m(d,I),I))}e.derivedObservableWithCache=y;function f(b,m){let I;const B=(0,T.observableValue)("derivedObservableWithWritableCache.counter",0),d=(0,L.derived)(b,g=>(B.read(g),I=m(g,I),I));return Object.assign(d,{clearCache:g=>{I=void 0,B.set(B.get()+1,g)}})}e.derivedObservableWithWritableCache=f});var x=this&&this.__createBinding||(Object.create?function(F,e,E,k){k===void 0&&(k=E);var T=Object.getOwnPropertyDescriptor(e,E);(!T||("get"in T?!e.__esModule:T.writable||T.configurable))&&(T={enumerable:!0,get:function(){return e[E]}}),Object.defineProperty(F,k,T)}:function(F,e,E,k){k===void 0&&(k=E),F[k]=e[E]}),ee=this&&this.__exportStar||function(F,e){for(var E in F)E!=="default"&&!Object.prototype.hasOwnProperty.call(e,E)&&x(e,F,E)};define(W[10],p([0,1,5,9,8,20,3]),function(F,e,E,k,T,L,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.autorunWithStore=e.autorunHandleChanges=e.autorunDelta=e.autorun=e.derived=e.transaction=e.observableValue=void 0,Object.defineProperty(e,"observableValue",{enumerable:!0,get:function(){return E.observableValue}}),Object.defineProperty(e,"transaction",{enumerable:!0,get:function(){return E.transaction}}),Object.defineProperty(e,"derived",{enumerable:!0,get:function(){return k.derived}}),Object.defineProperty(e,"autorun",{enumerable:!0,get:function(){return T.autorun}}),Object.defineProperty(e,"autorunDelta",{enumerable:!0,get:function(){return T.autorunDelta}}),Object.defineProperty(e,"autorunHandleChanges",{enumerable:!0,get:function(){return T.autorunHandleChanges}}),Object.defineProperty(e,"autorunWithStore",{enumerable:!0,get:function(){return T.autorunWithStore}}),ee(L,e),!1&&(0,n.setLogger)(new n.ConsoleObservableLogger)}),define(W[21],p([0,1,6,2]),function(F,e,E,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.prefixedStream=e.prefixedReadable=e.transform=e.toReadable=e.emptyStream=e.toStream=e.peekStream=e.listenStream=e.consumeStream=e.peekReadable=e.consumeReadable=e.newWriteableStream=e.isReadableBufferedStream=e.isReadableStream=e.isReadable=void 0;function T(R){const y=R;return y?typeof y.read=="function":!1}e.isReadable=T;function L(R){const y=R;return y?[y.on,y.pause,y.resume,y.destroy].every(f=>typeof f=="function"):!1}e.isReadableStream=L;function n(R){const y=R;return y?L(y.stream)&&Array.isArray(y.buffer)&&typeof y.ended=="boolean":!1}e.isReadableBufferedStream=n;function u(R,y){return new t(R,y)}e.newWriteableStream=u;class t{constructor(y,f){this.e=y,this.f=f,this.a={flowing:!1,ended:!1,destroyed:!1},this.b={data:[],error:[]},this.c={data:[],error:[],end:[]},this.d=[]}pause(){this.a.destroyed||(this.a.flowing=!1)}resume(){this.a.destroyed||this.a.flowing||(this.a.flowing=!0,this.j(),this.k(),this.l())}write(y){if(!this.a.destroyed){if(this.a.flowing)this.g(y);else if(this.b.data.push(y),typeof this.f?.highWaterMark=="number"&&this.b.data.length>this.f.highWaterMark)return new Promise(f=>this.d.push(f))}}error(y){this.a.destroyed||(this.a.flowing?this.h(y):this.b.error.push(y))}end(y){this.a.destroyed||(typeof y<"u"&&this.write(y),this.a.flowing?(this.i(),this.destroy()):this.a.ended=!0)}g(y){this.c.data.slice(0).forEach(f=>f(y))}h(y){this.c.error.length===0?(0,E.onUnexpectedError)(y):this.c.error.slice(0).forEach(f=>f(y))}i(){this.c.end.slice(0).forEach(y=>y())}on(y,f){if(!this.a.destroyed)switch(y){case"data":this.c.data.push(f),this.resume();break;case"end":this.c.end.push(f),this.a.flowing&&this.l()&&this.destroy();break;case"error":this.c.error.push(f),this.a.flowing&&this.k();break}}removeListener(y,f){if(this.a.destroyed)return;let b;switch(y){case"data":b=this.c.data;break;case"end":b=this.c.end;break;case"error":b=this.c.error;break}if(b){const m=b.indexOf(f);m>=0&&b.splice(m,1)}}j(){if(this.b.data.length>0){const y=this.e(this.b.data);this.g(y),this.b.data.length=0;const f=[...this.d];this.d.length=0,f.forEach(b=>b())}}k(){if(this.c.error.length>0){for(const y of this.b.error)this.h(y);this.b.error.length=0}}l(){return this.a.ended?(this.i(),this.c.end.length>0):!1}destroy(){this.a.destroyed||(this.a.destroyed=!0,this.a.ended=!0,this.b.data.length=0,this.b.error.length=0,this.c.data.length=0,this.c.error.length=0,this.c.end.length=0,this.d.length=0)}}function i(R,y){const f=[];let b;for(;(b=R.read())!==null;)f.push(b);return y(f)}e.consumeReadable=i;function r(R,y,f){const b=[];let m;for(;(m=R.read())!==null&&b.length<f;)b.push(m);return m===null&&b.length>0?y(b):{read:()=>{if(b.length>0)return b.shift();if(typeof m<"u"){const I=m;return m=void 0,I}return R.read()}}}e.peekReadable=r;function a(R,y){return new Promise((f,b)=>{const m=[];v(R,{onData:I=>{y&&m.push(I)},onError:I=>{y?b(I):f(void 0)},onEnd:()=>{f(y?y(m):void 0)}})})}e.consumeStream=a;function v(R,y){let f=!1;return R.on("error",b=>{f||y.onError(b)}),R.on("end",()=>{f||y.onEnd()}),R.on("data",b=>{f||y.onData(b)}),(0,k.toDisposable)(()=>f=!0)}e.listenStream=v;function w(R,y){return new Promise((f,b)=>{const m=new k.DisposableStore,I=[],B=l=>{if(I.push(l),I.length>y)return m.dispose(),R.pause(),f({stream:R,buffer:I,ended:!1})},d=l=>b(l),g=()=>f({stream:R,buffer:I,ended:!0});m.add((0,k.toDisposable)(()=>R.removeListener("error",d))),R.on("error",d),m.add((0,k.toDisposable)(()=>R.removeListener("end",g))),R.on("end",g),m.add((0,k.toDisposable)(()=>R.removeListener("data",B))),R.on("data",B)})}e.peekStream=w;function h(R,y){const f=u(y);return f.end(R),f}e.toStream=h;function s(){const R=u(()=>{throw new Error("not supported")});return R.end(),R}e.emptyStream=s;function c(R){let y=!1;return{read:()=>y?null:(y=!0,R)}}e.toReadable=c;function O(R,y,f){const b=u(f);return v(R,{onData:m=>b.write(y.data(m)),onError:m=>b.error(y.error?y.error(m):m),onEnd:()=>b.end()}),b}e.transform=O;function C(R,y,f){let b=!1;return{read:()=>{const m=y.read();return b?m:(b=!0,m!==null?f([R,m]):R)}}}e.prefixedReadable=C;function U(R,y,f){let b=!1;const m=u(f);return v(y,{onData:I=>b?m.write(I):(b=!0,m.write(f([R,I]))),onError:I=>m.error(I),onEnd:()=>{b||(b=!0,m.write(R)),m.end()}}),m}e.prefixedStream=U}),define(W[11],p([0,1,21]),function(F,e,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.encodeBase64=e.decodeBase64=e.prefixedBufferStream=e.prefixedBufferReadable=e.newWriteableBufferStream=e.streamToBufferReadableStream=e.bufferToStream=e.bufferedStreamToBuffer=e.streamToBuffer=e.bufferToReadable=e.readableToBuffer=e.writeUInt8=e.readUInt8=e.writeUInt32LE=e.readUInt32LE=e.writeUInt32BE=e.readUInt32BE=e.writeUInt16LE=e.readUInt16LE=e.VSBuffer=void 0;const k=typeof Buffer<"u";let T,L;class n{static alloc(l){return k?new n(Buffer.allocUnsafe(l)):new n(new Uint8Array(l))}static wrap(l){return k&&!Buffer.isBuffer(l)&&(l=Buffer.from(l.buffer,l.byteOffset,l.byteLength)),new n(l)}static fromString(l,A){return!(A?.dontUseNodeBuffer||!1)&&k?new n(Buffer.from(l)):(T||(T=new TextEncoder),new n(T.encode(l)))}static fromByteArray(l){const A=n.alloc(l.length);for(let z=0,D=l.length;z<D;z++)A.buffer[z]=l[z];return A}static concat(l,A){if(typeof A>"u"){A=0;for(let q=0,$=l.length;q<$;q++)A+=l[q].byteLength}const z=n.alloc(A);let D=0;for(let q=0,$=l.length;q<$;q++){const _=l[q];z.set(_,D),D+=_.byteLength}return z}constructor(l){this.buffer=l,this.byteLength=this.buffer.byteLength}clone(){const l=n.alloc(this.byteLength);return l.set(this),l}toString(){return k?this.buffer.toString():(L||(L=new TextDecoder),L.decode(this.buffer))}slice(l,A){return new n(this.buffer.subarray(l,A))}set(l,A){if(l instanceof n)this.buffer.set(l.buffer,A);else if(l instanceof Uint8Array)this.buffer.set(l,A);else if(l instanceof ArrayBuffer)this.buffer.set(new Uint8Array(l),A);else if(ArrayBuffer.isView(l))this.buffer.set(new Uint8Array(l.buffer,l.byteOffset,l.byteLength),A);else throw new Error("Unknown argument 'array'")}readUInt32BE(l){return i(this.buffer,l)}writeUInt32BE(l,A){r(this.buffer,l,A)}readUInt32LE(l){return a(this.buffer,l)}writeUInt32LE(l,A){v(this.buffer,l,A)}readUInt8(l){return w(this.buffer,l)}writeUInt8(l,A){h(this.buffer,l,A)}}e.VSBuffer=n;function u(g,l){return g[l+0]<<0>>>0|g[l+1]<<8>>>0}e.readUInt16LE=u;function t(g,l,A){g[A+0]=l&255,l=l>>>8,g[A+1]=l&255}e.writeUInt16LE=t;function i(g,l){return g[l]*2**24+g[l+1]*2**16+g[l+2]*2**8+g[l+3]}e.readUInt32BE=i;function r(g,l,A){g[A+3]=l,l=l>>>8,g[A+2]=l,l=l>>>8,g[A+1]=l,l=l>>>8,g[A]=l}e.writeUInt32BE=r;function a(g,l){return g[l+0]<<0>>>0|g[l+1]<<8>>>0|g[l+2]<<16>>>0|g[l+3]<<24>>>0}e.readUInt32LE=a;function v(g,l,A){g[A+0]=l&255,l=l>>>8,g[A+1]=l&255,l=l>>>8,g[A+2]=l&255,l=l>>>8,g[A+3]=l&255}e.writeUInt32LE=v;function w(g,l){return g[l]}e.readUInt8=w;function h(g,l,A){g[A]=l}e.writeUInt8=h;function s(g){return E.consumeReadable(g,l=>n.concat(l))}e.readableToBuffer=s;function c(g){return E.toReadable(g)}e.bufferToReadable=c;function O(g){return E.consumeStream(g,l=>n.concat(l))}e.streamToBuffer=O;async function C(g){return g.ended?n.concat(g.buffer):n.concat([...g.buffer,await O(g.stream)])}e.bufferedStreamToBuffer=C;function U(g){return E.toStream(g,l=>n.concat(l))}e.bufferToStream=U;function R(g){return E.transform(g,{data:l=>typeof l=="string"?n.fromString(l):n.wrap(l)},l=>n.concat(l))}e.streamToBufferReadableStream=R;function y(g){return E.newWriteableStream(l=>n.concat(l),g)}e.newWriteableBufferStream=y;function f(g,l){return E.prefixedReadable(g,l,A=>n.concat(A))}e.prefixedBufferReadable=f;function b(g,l){return E.prefixedStream(g,l,A=>n.concat(A))}e.prefixedBufferStream=b;function m(g){let l=0,A=0,z=0;const D=new Uint8Array(Math.floor(g.length/4*3)),q=_=>{switch(A){case 3:D[z++]=l|_,A=0;break;case 2:D[z++]=l|_>>>2,l=_<<6,A=3;break;case 1:D[z++]=l|_>>>4,l=_<<4,A=2;break;default:l=_<<2,A=1}};for(let _=0;_<g.length;_++){const K=g.charCodeAt(_);if(K>=65&&K<=90)q(K-65);else if(K>=97&&K<=122)q(K-97+26);else if(K>=48&&K<=57)q(K-48+52);else if(K===43||K===45)q(62);else if(K===47||K===95)q(63);else{if(K===61)break;throw new SyntaxError(`Unexpected base64 character ${g[_]}`)}}const $=z;for(;A>0;)q(0);return n.wrap(D).slice(0,$)}e.decodeBase64=m;const I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",B="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function d({buffer:g},l=!0,A=!1){const z=A?B:I;let D="";const q=g.byteLength%3;let $=0;for(;$<g.byteLength-q;$+=3){const _=g[$+0],K=g[$+1],Q=g[$+2];D+=z[_>>>2],D+=z[(_<<4|K>>>4)&63],D+=z[(K<<2|Q>>>6)&63],D+=z[Q&63]}if(q===1){const _=g[$+0];D+=z[_>>>2],D+=z[_<<4&63],l&&(D+="==")}else if(q===2){const _=g[$+0],K=g[$+1];D+=z[_>>>2],D+=z[(_<<4|K>>>4)&63],D+=z[K<<2&63],l&&(D+="=")}return D}e.encodeBase64=d}),define(W[22],p([0,1]),function(F,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MicrotaskDelay=void 0,e.MicrotaskDelay=Symbol("MicrotaskDelay")}),define(W[12],p([0,1]),function(F,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.countEOL=e.StringEOL=void 0;var E;(function(T){T[T.Unknown=0]="Unknown",T[T.Invalid=3]="Invalid",T[T.LF=1]="LF",T[T.CRLF=2]="CRLF"})(E=e.StringEOL||(e.StringEOL={}));function k(T){let L=0,n=0,u=0,t=0;for(let i=0,r=T.length;i<r;i++){const a=T.charCodeAt(i);a===13?(L===0&&(n=i),L++,i+1<r&&T.charCodeAt(i+1)===10?(t|=2,i++):t|=3,u=i+1):a===10&&(t|=1,L===0&&(n=i),L++,u=i+1)}return L===0&&(n=T.length),[L,n,T.length-u,t]}e.countEOL=k}),define(W[13],p([0,1]),function(F,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TokenMetadata=e.MetadataConsts=e.StandardTokenType=e.ColorId=e.FontStyle=e.LanguageId=void 0;var E;(function(t){t[t.Null=0]="Null",t[t.PlainText=1]="PlainText"})(E=e.LanguageId||(e.LanguageId={}));var k;(function(t){t[t.NotSet=-1]="NotSet",t[t.None=0]="None",t[t.Italic=1]="Italic",t[t.Bold=2]="Bold",t[t.Underline=4]="Underline",t[t.Strikethrough=8]="Strikethrough"})(k=e.FontStyle||(e.FontStyle={}));var T;(function(t){t[t.None=0]="None",t[t.DefaultForeground=1]="DefaultForeground",t[t.DefaultBackground=2]="DefaultBackground"})(T=e.ColorId||(e.ColorId={}));var L;(function(t){t[t.Other=0]="Other",t[t.Comment=1]="Comment",t[t.String=2]="String",t[t.RegEx=3]="RegEx"})(L=e.StandardTokenType||(e.StandardTokenType={}));var n;(function(t){t[t.LANGUAGEID_MASK=255]="LANGUAGEID_MASK",t[t.TOKEN_TYPE_MASK=768]="TOKEN_TYPE_MASK",t[t.BALANCED_BRACKETS_MASK=1024]="BALANCED_BRACKETS_MASK",t[t.FONT_STYLE_MASK=30720]="FONT_STYLE_MASK",t[t.FOREGROUND_MASK=16744448]="FOREGROUND_MASK",t[t.BACKGROUND_MASK=4278190080]="BACKGROUND_MASK",t[t.ITALIC_MASK=2048]="ITALIC_MASK",t[t.BOLD_MASK=4096]="BOLD_MASK",t[t.UNDERLINE_MASK=8192]="UNDERLINE_MASK",t[t.STRIKETHROUGH_MASK=16384]="STRIKETHROUGH_MASK",t[t.SEMANTIC_USE_ITALIC=1]="SEMANTIC_USE_ITALIC",t[t.SEMANTIC_USE_BOLD=2]="SEMANTIC_USE_BOLD",t[t.SEMANTIC_USE_UNDERLINE=4]="SEMANTIC_USE_UNDERLINE",t[t.SEMANTIC_USE_STRIKETHROUGH=8]="SEMANTIC_USE_STRIKETHROUGH",t[t.SEMANTIC_USE_FOREGROUND=16]="SEMANTIC_USE_FOREGROUND",t[t.SEMANTIC_USE_BACKGROUND=32]="SEMANTIC_USE_BACKGROUND",t[t.LANGUAGEID_OFFSET=0]="LANGUAGEID_OFFSET",t[t.TOKEN_TYPE_OFFSET=8]="TOKEN_TYPE_OFFSET",t[t.BALANCED_BRACKETS_OFFSET=10]="BALANCED_BRACKETS_OFFSET",t[t.FONT_STYLE_OFFSET=11]="FONT_STYLE_OFFSET",t[t.FOREGROUND_OFFSET=15]="FOREGROUND_OFFSET",t[t.BACKGROUND_OFFSET=24]="BACKGROUND_OFFSET"})(n=e.MetadataConsts||(e.MetadataConsts={}));class u{static getLanguageId(i){return(i&255)>>>0}static getTokenType(i){return(i&768)>>>8}static containsBalancedBrackets(i){return(i&1024)!==0}static getFontStyle(i){return(i&30720)>>>11}static getForeground(i){return(i&16744448)>>>15}static getBackground(i){return(i&4278190080)>>>24}static getClassNameFromMetadata(i){let a="mtk"+this.getForeground(i);const v=this.getFontStyle(i);return v&1&&(a+=" mtki"),v&2&&(a+=" mtkb"),v&4&&(a+=" mtku"),v&8&&(a+=" mtks"),a}static getInlineStyleFromMetadata(i,r){const a=this.getForeground(i),v=this.getFontStyle(i);let w=`color: ${r[a]};`;v&1&&(w+="font-style: italic;"),v&2&&(w+="font-weight: bold;");let h="";return v&4&&(h+=" underline"),v&8&&(h+=" line-through"),h&&(w+=`text-decoration:${h};`),w}static getPresentationFromMetadata(i){const r=this.getForeground(i),a=this.getFontStyle(i);return{foreground:r,italic:!!(a&1),bold:!!(a&2),underline:!!(a&4),strikethrough:!!(a&8)}}}e.TokenMetadata=u}),define(W[23],p([0,1,24]),function(F,e,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FixedArray=void 0;class k{constructor(n){this.b=n,this.a=[]}get(n){return n<this.a.length?this.a[n]:this.b}set(n,u){for(;n>=this.a.length;)this.a[this.a.length]=this.b;this.a[n]=u}replace(n,u,t){if(n>=this.a.length)return;if(u===0){this.insert(n,t);return}else if(t===0){this.delete(n,u);return}const i=this.a.slice(0,n),r=this.a.slice(n+u),a=T(t,this.b);this.a=i.concat(a,r)}delete(n,u){u===0||n>=this.a.length||this.a.splice(n,u)}insert(n,u){if(u===0||n>=this.a.length)return;const t=[];for(let i=0;i<u;i++)t[i]=this.b;this.a=(0,E.arrayInsert)(this.a,n,t)}}e.FixedArray=k;function T(L,n){const u=[];for(let t=0;t<L;t++)u[t]=n;return u}}),define(W[7],p([0,1,13]),function(F,e,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LineTokens=void 0;class k{static createEmpty(n,u){const t=k.defaultTokenMetadata,i=new Uint32Array(2);return i[0]=n.length,i[1]=t,new k(i,n,u)}constructor(n,u,t){this._lineTokensBrand=void 0,this.a=n,this.b=this.a.length>>>1,this.c=u,this.d=t}equals(n){return n instanceof k?this.slicedEquals(n,0,this.b):!1}slicedEquals(n,u,t){if(this.c!==n.c||this.b!==n.b)return!1;const i=u<<1,r=i+(t<<1);for(let a=i;a<r;a++)if(this.a[a]!==n.a[a])return!1;return!0}getLineContent(){return this.c}getCount(){return this.b}getStartOffset(n){return n>0?this.a[n-1<<1]:0}getMetadata(n){return this.a[(n<<1)+1]}getLanguageId(n){const u=this.a[(n<<1)+1],t=E.TokenMetadata.getLanguageId(u);return this.d.decodeLanguageId(t)}getStandardTokenType(n){const u=this.a[(n<<1)+1];return E.TokenMetadata.getTokenType(u)}getForeground(n){const u=this.a[(n<<1)+1];return E.TokenMetadata.getForeground(u)}getClassName(n){const u=this.a[(n<<1)+1];return E.TokenMetadata.getClassNameFromMetadata(u)}getInlineStyle(n,u){const t=this.a[(n<<1)+1];return E.TokenMetadata.getInlineStyleFromMetadata(t,u)}getPresentation(n){const u=this.a[(n<<1)+1];return E.TokenMetadata.getPresentationFromMetadata(u)}getEndOffset(n){return this.a[n<<1]}findTokenIndexAtOffset(n){return k.findIndexInTokensArray(this.a,n)}inflate(){return this}sliceAndInflate(n,u,t){return new T(this,n,u,t)}static convertToEndOffset(n,u){const i=(n.length>>>1)-1;for(let r=0;r<i;r++)n[r<<1]=n[r+1<<1];n[i<<1]=u}static findIndexInTokensArray(n,u){if(n.length<=2)return 0;let t=0,i=(n.length>>>1)-1;for(;t<i;){const r=t+Math.floor((i-t)/2),a=n[r<<1];if(a===u)return r+1;a<u?t=r+1:a>u&&(i=r)}return t}withInserted(n){if(n.length===0)return this;let u=0,t=0,i="";const r=new Array;let a=0;for(;;){const v=u<this.b?this.a[u<<1]:-1,w=t<n.length?n[t]:null;if(v!==-1&&(w===null||v<=w.offset)){i+=this.c.substring(a,v);const h=this.a[(u<<1)+1];r.push(i.length,h),u++,a=v}else if(w){if(w.offset>a){i+=this.c.substring(a,w.offset);const h=this.a[(u<<1)+1];r.push(i.length,h),a=w.offset}i+=w.text,r.push(i.length,w.tokenMetadata),t++}else break}return new k(new Uint32Array(r),i,this.d)}}k.defaultTokenMetadata=(0<<11|1<<15|2<<24)>>>0,e.LineTokens=k;class T{constructor(n,u,t,i){this.a=n,this.b=u,this.c=t,this.d=i,this.e=n.findTokenIndexAtOffset(u),this.f=0;for(let r=this.e,a=n.getCount();r<a&&!(n.getStartOffset(r)>=t);r++)this.f++}getMetadata(n){return this.a.getMetadata(this.e+n)}getLanguageId(n){return this.a.getLanguageId(this.e+n)}getLineContent(){return this.a.getLineContent().substring(this.b,this.c)}equals(n){return n instanceof T?this.b===n.b&&this.c===n.c&&this.d===n.d&&this.a.slicedEquals(n.a,this.e,this.f):!1}getCount(){return this.f}getForeground(n){return this.a.getForeground(this.e+n)}getEndOffset(n){const u=this.a.getEndOffset(this.e+n);return Math.min(this.c,u)-this.b+this.d}getClassName(n){return this.a.getClassName(this.e+n)}getInlineStyle(n,u){return this.a.getInlineStyle(this.e+n,u)}getPresentation(n){return this.a.getPresentation(this.e+n)}findTokenIndexAtOffset(n){return this.a.findTokenIndexAtOffset(n+this.b-this.d)-this.e}}}),define(W[25],p([0,1,7]),function(F,e,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toUint32Array=e.ContiguousTokensEditing=e.EMPTY_LINE_TOKENS=void 0,e.EMPTY_LINE_TOKENS=new Uint32Array(0).buffer;class k{static deleteBeginning(n,u){return n===null||n===e.EMPTY_LINE_TOKENS?n:k.delete(n,0,u)}static deleteEnding(n,u){if(n===null||n===e.EMPTY_LINE_TOKENS)return n;const t=T(n),i=t[t.length-2];return k.delete(n,u,i)}static delete(n,u,t){if(n===null||n===e.EMPTY_LINE_TOKENS||u===t)return n;const i=T(n),r=i.length>>>1;if(u===0&&i[i.length-2]===t)return e.EMPTY_LINE_TOKENS;const a=E.LineTokens.findIndexInTokensArray(i,u),v=a>0?i[a-1<<1]:0,w=i[a<<1];if(t<w){const C=t-u;for(let U=a;U<r;U++)i[U<<1]-=C;return n}let h,s;v!==u?(i[a<<1]=u,h=a+1<<1,s=u):(h=a<<1,s=v);const c=t-u;for(let C=a+1;C<r;C++){const U=i[C<<1]-c;U>s&&(i[h++]=U,i[h++]=i[(C<<1)+1],s=U)}if(h===i.length)return n;const O=new Uint32Array(h);return O.set(i.subarray(0,h),0),O.buffer}static append(n,u){if(u===e.EMPTY_LINE_TOKENS)return n;if(n===e.EMPTY_LINE_TOKENS)return u;if(n===null)return n;if(u===null)return null;const t=T(n),i=T(u),r=i.length>>>1,a=new Uint32Array(t.length+i.length);a.set(t,0);let v=t.length;const w=t[t.length-2];for(let h=0;h<r;h++)a[v++]=i[h<<1]+w,a[v++]=i[(h<<1)+1];return a.buffer}static insert(n,u,t){if(n===null||n===e.EMPTY_LINE_TOKENS)return n;const i=T(n),r=i.length>>>1;let a=E.LineTokens.findIndexInTokensArray(i,u);a>0&&i[a-1<<1]===u&&a--;for(let v=a;v<r;v++)i[v<<1]+=t;return n}}e.ContiguousTokensEditing=k;function T(L){return L instanceof Uint32Array?L:new Uint32Array(L)}e.toUint32Array=T}),define(W[26],p([0,1,24,11,39,12,25,14]),function(F,e,E,k,T,L,n,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContiguousMultilineTokens=void 0;class t{static deserialize(r,a,v){const w=new Uint32Array(r.buffer),h=(0,k.readUInt32BE)(r,a);a+=4;const s=(0,k.readUInt32BE)(r,a);a+=4;const c=[];for(let O=0;O<s;O++){const C=(0,k.readUInt32BE)(r,a);a+=4,c.push(w.subarray(a/4,a/4+C/4)),a+=C}return v.push(new t(h,c)),a}get startLineNumber(){return this.a}get endLineNumber(){return this.a+this.b.length-1}constructor(r,a){this.a=r,this.b=a}getLineRange(){return new u.LineRange(this.a,this.a+this.b.length)}getLineTokens(r){return this.b[r-this.a]}appendLineTokens(r){this.b.push(r)}serializeSize(){let r=0;r+=4,r+=4;for(let a=0;a<this.b.length;a++){const v=this.b[a];if(!(v instanceof Uint32Array))throw new Error("Not supported!");r+=4,r+=v.byteLength}return r}serialize(r,a){(0,k.writeUInt32BE)(r,this.a,a),a+=4,(0,k.writeUInt32BE)(r,this.b.length,a),a+=4;for(let v=0;v<this.b.length;v++){const w=this.b[v];if(!(w instanceof Uint32Array))throw new Error("Not supported!");(0,k.writeUInt32BE)(r,w.byteLength,a),a+=4,r.set(new Uint8Array(w.buffer),a),a+=w.byteLength}return a}applyEdit(r,a){const[v,w]=(0,L.countEOL)(a);this.c(r),this.d(new T.Position(r.startLineNumber,r.startColumn),v,w)}c(r){if(r.startLineNumber===r.endLineNumber&&r.startColumn===r.endColumn)return;const a=r.startLineNumber-this.a,v=r.endLineNumber-this.a;if(v<0){const w=v-a;this.a-=w;return}if(!(a>=this.b.length)){if(a<0&&v>=this.b.length){this.a=0,this.b=[];return}if(a===v){this.b[a]=n.ContiguousTokensEditing.delete(this.b[a],r.startColumn-1,r.endColumn-1);return}if(a>=0)if(this.b[a]=n.ContiguousTokensEditing.deleteEnding(this.b[a],r.startColumn-1),v<this.b.length){const w=n.ContiguousTokensEditing.deleteBeginning(this.b[v],r.endColumn-1);this.b[a]=n.ContiguousTokensEditing.append(this.b[a],w),this.b.splice(a+1,v-a)}else this.b[a]=n.ContiguousTokensEditing.append(this.b[a],null),this.b=this.b.slice(0,a+1);else{const w=-a;this.a-=w,this.b[v]=n.ContiguousTokensEditing.deleteBeginning(this.b[v],r.endColumn-1),this.b=this.b.slice(v)}}}d(r,a,v){if(a===0&&v===0)return;const w=r.lineNumber-this.a;if(w<0){this.a+=a;return}if(!(w>=this.b.length)){if(a===0){this.b[w]=n.ContiguousTokensEditing.insert(this.b[w],r.column-1,v);return}this.b[w]=n.ContiguousTokensEditing.deleteEnding(this.b[w],r.column-1),this.b[w]=n.ContiguousTokensEditing.insert(this.b[w],r.column-1,v),this.e(r.lineNumber,a)}}e(r,a){if(a===0)return;const v=[];for(let w=0;w<a;w++)v[w]=null;this.b=E.arrayInsert(this.b,r,v)}}e.ContiguousMultilineTokens=t}),define(W[15],p([0,1,11,26]),function(F,e,E,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContiguousMultilineTokensBuilder=void 0;class T{static deserialize(n){let u=0;const t=(0,E.readUInt32BE)(n,u);u+=4;const i=[];for(let r=0;r<t;r++)u=k.ContiguousMultilineTokens.deserialize(n,u,i);return i}constructor(){this.a=[]}add(n,u){if(this.a.length>0){const t=this.a[this.a.length-1];if(t.endLineNumber+1===n){t.appendLineTokens(u);return}}this.a.push(new k.ContiguousMultilineTokens(n,[u]))}finalize(){return this.a}serialize(){const n=this.b(),u=new Uint8Array(n);return this.c(u),u}b(){let n=0;n+=4;for(let u=0;u<this.a.length;u++)n+=this.a[u].serializeSize();return n}c(n){let u=0;(0,E.writeUInt32BE)(n,this.a.length,u),u+=4;for(let t=0;t<this.a.length;t++)u=this.a[t].serialize(n,u)}}e.ContiguousMultilineTokensBuilder=T}),define(W[27],p([0,1,28,4,29,40]),function(F,e,E,k,T,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.randomPath=e.parseLineAndColumnAware=e.indexOfPath=e.getDriveLetter=e.hasDriveLetter=e.isRootOrDriveLetter=e.sanitizeFilePath=e.isWindowsDriveLetter=e.isEqualOrParent=e.isEqual=e.isValidBasename=e.isUNC=e.getRoot=e.toPosixPath=e.toSlashes=e.isPathSeparator=void 0;function n(d){return d===47||d===92}e.isPathSeparator=n;function u(d){return d.replace(/[\\/]/g,E.posix.sep)}e.toSlashes=u;function t(d){return d.indexOf("/")===-1&&(d=u(d)),/^[a-zA-Z]:(\/|$)/.test(d)&&(d="/"+d),d}e.toPosixPath=t;function i(d,g=E.posix.sep){if(!d)return"";const l=d.length,A=d.charCodeAt(0);if(n(A)){if(n(d.charCodeAt(1))&&!n(d.charCodeAt(2))){let D=3;const q=D;for(;D<l&&!n(d.charCodeAt(D));D++);if(q!==D&&!n(d.charCodeAt(D+1))){for(D+=1;D<l;D++)if(n(d.charCodeAt(D)))return d.slice(0,D+1).replace(/[\\/]/g,g)}}return g}else if(O(A)&&d.charCodeAt(1)===58)return n(d.charCodeAt(2))?d.slice(0,2)+g:d.slice(0,2);let z=d.indexOf("://");if(z!==-1){for(z+=3;z<l;z++)if(n(d.charCodeAt(z)))return d.slice(0,z+1)}return""}e.getRoot=i;function r(d){if(!k.isWindows||!d||d.length<5)return!1;let g=d.charCodeAt(0);if(g!==92||(g=d.charCodeAt(1),g!==92))return!1;let l=2;const A=l;for(;l<d.length&&(g=d.charCodeAt(l),g!==92);l++);return!(A===l||(g=d.charCodeAt(l+1),isNaN(g)||g===92))}e.isUNC=r;const a=/[\\/:\*\?"<>\|]/g,v=/[\\/]/g,w=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function h(d,g=k.isWindows){const l=g?a:v;return!(!d||d.length===0||/^\s+$/.test(d)||(l.lastIndex=0,l.test(d))||g&&w.test(d)||d==="."||d===".."||g&&d[d.length-1]==="."||g&&d.length!==d.trim().length||d.length>255)}e.isValidBasename=h;function s(d,g,l){const A=d===g;return!l||A?A:!d||!g?!1:(0,T.equalsIgnoreCase)(d,g)}e.isEqual=s;function c(d,g,l,A=E.sep){if(d===g)return!0;if(!d||!g||g.length>d.length)return!1;if(l){if(!(0,T.startsWithIgnoreCase)(d,g))return!1;if(g.length===d.length)return!0;let D=g.length;return g.charAt(g.length-1)===A&&D--,d.charAt(D)===A}return g.charAt(g.length-1)!==A&&(g+=A),d.indexOf(g)===0}e.isEqualOrParent=c;function O(d){return d>=65&&d<=90||d>=97&&d<=122}e.isWindowsDriveLetter=O;function C(d,g){return k.isWindows&&d.endsWith(":")&&(d+=E.sep),(0,E.isAbsolute)(d)||(d=(0,E.join)(g,d)),d=(0,E.normalize)(d),k.isWindows?(d=(0,T.rtrim)(d,E.sep),d.endsWith(":")&&(d+=E.sep)):(d=(0,T.rtrim)(d,E.sep),d||(d=E.sep)),d}e.sanitizeFilePath=C;function U(d){const g=(0,E.normalize)(d);return k.isWindows?d.length>3?!1:R(g)&&(d.length===2||g.charCodeAt(2)===92):g===E.posix.sep}e.isRootOrDriveLetter=U;function R(d,g=k.isWindows){return g?O(d.charCodeAt(0))&&d.charCodeAt(1)===58:!1}e.hasDriveLetter=R;function y(d){return R(d)?d[0]:void 0}e.getDriveLetter=y;function f(d,g,l){return g.length>d.length?-1:d===g?0:(l&&(d=d.toLowerCase(),g=g.toLowerCase()),d.indexOf(g))}e.indexOfPath=f;function b(d){const g=d.split(":");let l,A,z;for(const D of g){const q=Number(D);(0,L.isNumber)(q)?A===void 0?A=q:z===void 0&&(z=q):l=l?[l,D].join(":"):D}if(!l)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:l,line:A!==void 0?A:void 0,column:z!==void 0?z:A!==void 0?1:void 0}}e.parseLineAndColumnAware=b;const m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",I="BDEFGHIJKMOQRSTUVWXYZbdefghijkmoqrstuvwxyz0123456789";function B(d,g,l=8){let A="";for(let D=0;D<l;D++){let q;D===0&&k.isWindows&&!g&&(l===3||l===4)?q=I:q=m,A+=q.charAt(Math.floor(Math.random()*q.length))}let z;return g?z=`${g}-${A}`:z=A,d?(0,E.join)(d,z):z}e.randomPath=B}),define(W[30],p([0,1,6,4,16]),function(F,e,E,k,T){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.COI=e.FileAccess=e.nodeModulesAsarUnpackedPath=e.nodeModulesAsarPath=e.nodeModulesPath=e.builtinExtensionsPath=e.RemoteAuthorities=e.connectionTokenQueryName=e.connectionTokenCookieName=e.Schemas=void 0;var L;(function(i){i.inMemory="inmemory",i.vscode="vscode",i.internal="private",i.walkThrough="walkThrough",i.walkThroughSnippet="walkThroughSnippet",i.http="http",i.https="https",i.file="file",i.mailto="mailto",i.untitled="untitled",i.data="data",i.command="command",i.vscodeRemote="vscode-remote",i.vscodeRemoteResource="vscode-remote-resource",i.vscodeUserData="vscode-userdata",i.vscodeCustomEditor="vscode-custom-editor",i.vscodeNotebookCell="vscode-notebook-cell",i.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",i.vscodeNotebookCellOutput="vscode-notebook-cell-output",i.vscodeInteractive="vscode-interactive",i.vscodeInteractiveInput="vscode-interactive-input",i.vscodeSettings="vscode-settings",i.vscodeWorkspaceTrust="vscode-workspace-trust",i.vscodeTerminal="vscode-terminal",i.vscodeInteractiveSesssion="vscode-chat-editor",i.webviewPanel="webview-panel",i.vscodeWebview="vscode-webview",i.extension="extension",i.vscodeFileResource="vscode-file",i.tmp="tmp",i.vsls="vsls",i.vscodeSourceControl="vscode-scm"})(L=e.Schemas||(e.Schemas={})),e.connectionTokenCookieName="vscode-tkn",e.connectionTokenQueryName="tkn";class n{constructor(){this.a=Object.create(null),this.b=Object.create(null),this.c=Object.create(null),this.d="http",this.e=null,this.f=`/${L.vscodeRemoteResource}`}setPreferredWebSchema(r){this.d=r}setDelegate(r){this.e=r}setServerRootPath(r){this.f=`${r}/${L.vscodeRemoteResource}`}set(r,a,v){this.a[r]=a,this.b[r]=v}setConnectionToken(r,a){this.c[r]=a}getPreferredWebSchema(){return this.d}rewrite(r){if(this.e)try{return this.e(r)}catch(c){return E.onUnexpectedError(c),r}const a=r.authority;let v=this.a[a];v&&v.indexOf(":")!==-1&&v.indexOf("[")===-1&&(v=`[${v}]`);const w=this.b[a],h=this.c[a];let s=`path=${encodeURIComponent(r.path)}`;return typeof h=="string"&&(s+=`&${e.connectionTokenQueryName}=${encodeURIComponent(h)}`),T.URI.from({scheme:k.isWeb?this.d:L.vscodeRemoteResource,authority:`${v}:${w}`,path:this.f,query:s})}}e.RemoteAuthorities=new n,e.builtinExtensionsPath="vs/../../extensions",e.nodeModulesPath="vs/../../node_modules",e.nodeModulesAsarPath="vs/../../node_modules.asar",e.nodeModulesAsarUnpackedPath="vs/../../node_modules.asar.unpacked";class u{asBrowserUri(r){const a=this.b(r,F);return this.uriToBrowserUri(a)}uriToBrowserUri(r){return r.scheme===L.vscodeRemote?e.RemoteAuthorities.rewrite(r):r.scheme===L.file&&(k.isNative||k.isWebWorker&&k.globals.origin===`${L.vscodeFileResource}://${u.a}`)?r.with({scheme:L.vscodeFileResource,authority:r.authority||u.a,query:null,fragment:null}):r}asFileUri(r){const a=this.b(r,F);return this.uriToFileUri(a)}uriToFileUri(r){return r.scheme===L.vscodeFileResource?r.with({scheme:L.file,authority:r.authority!==u.a?r.authority:null,query:null,fragment:null}):r}b(r,a){return T.URI.isUri(r)?r:T.URI.parse(a.toUrl(r))}}u.a="vscode-app",e.FileAccess=new u;var t;(function(i){const r=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);i.CoopAndCoep=Object.freeze(r.get("3"));const a="vscode-coi";function v(h){let s;typeof h=="string"?s=new URL(h).searchParams:h instanceof URL?s=h.searchParams:T.URI.isUri(h)&&(s=new URL(h.toString(!0)).searchParams);const c=s?.get(a);if(c)return r.get(c)}i.getHeadersFromQuery=v;function w(h,s,c){if(!globalThis.crossOriginIsolated)return;const O=s&&c?"3":c?"2":"1";h instanceof URLSearchParams?h.set(a,O):h[a]=O}i.addSearchParam=w})(t=e.COI||(e.COI={}))}),define(W[17],p([0,1,27,30,28,4,29,16]),function(F,e,E,k,T,L,n,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toLocalResource=e.DataUri=e.distinctParents=e.addTrailingPathSeparator=e.removeTrailingPathSeparator=e.hasTrailingPathSeparator=e.isEqualAuthority=e.isAbsolutePath=e.resolvePath=e.relativePath=e.normalizePath=e.joinPath=e.dirname=e.extname=e.basename=e.basenameOrAuthority=e.getComparisonKey=e.isEqualOrParent=e.isEqual=e.extUriIgnorePathCase=e.extUriBiasedIgnorePathCase=e.extUri=e.ExtUri=e.originalFSPath=void 0;function t(w){return(0,u.uriToFsPath)(w,!0)}e.originalFSPath=t;class i{constructor(h){this.a=h}compare(h,s,c=!1){return h===s?0:(0,n.compare)(this.getComparisonKey(h,c),this.getComparisonKey(s,c))}isEqual(h,s,c=!1){return h===s?!0:!h||!s?!1:this.getComparisonKey(h,c)===this.getComparisonKey(s,c)}getComparisonKey(h,s=!1){return h.with({path:this.a(h)?h.path.toLowerCase():void 0,fragment:s?null:void 0}).toString()}ignorePathCasing(h){return this.a(h)}isEqualOrParent(h,s,c=!1){if(h.scheme===s.scheme){if(h.scheme===k.Schemas.file)return E.isEqualOrParent(t(h),t(s),this.a(h))&&h.query===s.query&&(c||h.fragment===s.fragment);if((0,e.isEqualAuthority)(h.authority,s.authority))return E.isEqualOrParent(h.path,s.path,this.a(h),"/")&&h.query===s.query&&(c||h.fragment===s.fragment)}return!1}joinPath(h,...s){return u.URI.joinPath(h,...s)}basenameOrAuthority(h){return(0,e.basename)(h)||h.authority}basename(h){return T.posix.basename(h.path)}extname(h){return T.posix.extname(h.path)}dirname(h){if(h.path.length===0)return h;let s;return h.scheme===k.Schemas.file?s=u.URI.file(T.dirname(t(h))).path:(s=T.posix.dirname(h.path),h.authority&&s.length&&s.charCodeAt(0)!==47&&(console.error(`dirname("${h.toString})) resulted in a relative path`),s="/")),h.with({path:s})}normalizePath(h){if(!h.path.length)return h;let s;return h.scheme===k.Schemas.file?s=u.URI.file(T.normalize(t(h))).path:s=T.posix.normalize(h.path),h.with({path:s})}relativePath(h,s){if(h.scheme!==s.scheme||!(0,e.isEqualAuthority)(h.authority,s.authority))return;if(h.scheme===k.Schemas.file){const C=T.relative(t(h),t(s));return L.isWindows?E.toSlashes(C):C}let c=h.path||"/";const O=s.path||"/";if(this.a(h)){let C=0;for(const U=Math.min(c.length,O.length);C<U&&!(c.charCodeAt(C)!==O.charCodeAt(C)&&c.charAt(C).toLowerCase()!==O.charAt(C).toLowerCase());C++);c=O.substr(0,C)+c.substr(C)}return T.posix.relative(c,O)}resolvePath(h,s){if(h.scheme===k.Schemas.file){const c=u.URI.file(T.resolve(t(h),s));return h.with({authority:c.authority,path:c.path})}return s=E.toPosixPath(s),h.with({path:T.posix.resolve(h.path,s)})}isAbsolutePath(h){return!!h.path&&h.path[0]==="/"}isEqualAuthority(h,s){return h===s||h!==void 0&&s!==void 0&&(0,n.equalsIgnoreCase)(h,s)}hasTrailingPathSeparator(h,s=T.sep){if(h.scheme===k.Schemas.file){const c=t(h);return c.length>E.getRoot(c).length&&c[c.length-1]===s}else{const c=h.path;return c.length>1&&c.charCodeAt(c.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(h.fsPath)}}removeTrailingPathSeparator(h,s=T.sep){return(0,e.hasTrailingPathSeparator)(h,s)?h.with({path:h.path.substr(0,h.path.length-1)}):h}addTrailingPathSeparator(h,s=T.sep){let c=!1;if(h.scheme===k.Schemas.file){const O=t(h);c=O!==void 0&&O.length===E.getRoot(O).length&&O[O.length-1]===s}else{s="/";const O=h.path;c=O.length===1&&O.charCodeAt(O.length-1)===47}return!c&&!(0,e.hasTrailingPathSeparator)(h,s)?h.with({path:h.path+"/"}):h}}e.ExtUri=i,e.extUri=new i(()=>!1),e.extUriBiasedIgnorePathCase=new i(w=>w.scheme===k.Schemas.file?!L.isLinux:!0),e.extUriIgnorePathCase=new i(w=>!0),e.isEqual=e.extUri.isEqual.bind(e.extUri),e.isEqualOrParent=e.extUri.isEqualOrParent.bind(e.extUri),e.getComparisonKey=e.extUri.getComparisonKey.bind(e.extUri),e.basenameOrAuthority=e.extUri.basenameOrAuthority.bind(e.extUri),e.basename=e.extUri.basename.bind(e.extUri),e.extname=e.extUri.extname.bind(e.extUri),e.dirname=e.extUri.dirname.bind(e.extUri),e.joinPath=e.extUri.joinPath.bind(e.extUri),e.normalizePath=e.extUri.normalizePath.bind(e.extUri),e.relativePath=e.extUri.relativePath.bind(e.extUri),e.resolvePath=e.extUri.resolvePath.bind(e.extUri),e.isAbsolutePath=e.extUri.isAbsolutePath.bind(e.extUri),e.isEqualAuthority=e.extUri.isEqualAuthority.bind(e.extUri),e.hasTrailingPathSeparator=e.extUri.hasTrailingPathSeparator.bind(e.extUri),e.removeTrailingPathSeparator=e.extUri.removeTrailingPathSeparator.bind(e.extUri),e.addTrailingPathSeparator=e.extUri.addTrailingPathSeparator.bind(e.extUri);function r(w,h){const s=[];for(let c=0;c<w.length;c++){const O=h(w[c]);w.some((C,U)=>U===c?!1:(0,e.isEqualOrParent)(O,h(C)))||s.push(w[c])}return s}e.distinctParents=r;var a;(function(w){w.META_DATA_LABEL="label",w.META_DATA_DESCRIPTION="description",w.META_DATA_SIZE="size",w.META_DATA_MIME="mime";function h(s){const c=new Map;s.path.substring(s.path.indexOf(";")+1,s.path.lastIndexOf(";")).split(";").forEach(U=>{const[R,y]=U.split(":");R&&y&&c.set(R,y)});const C=s.path.substring(0,s.path.indexOf(";"));return C&&c.set(w.META_DATA_MIME,C),c}w.parseMetaData=h})(a=e.DataUri||(e.DataUri={}));function v(w,h,s){if(h){let c=w.path;return c&&c[0]!==T.posix.sep&&(c=T.posix.sep+c),w.with({scheme:s,authority:h,path:c})}return w.with({scheme:s})}e.toLocalResource=v}),define(W[18],p([0,1,41,6,31,2,17,4,22]),function(F,e,E,k,T,L,n,u,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createCancelableAsyncIterable=e.CancelableAsyncIterableObject=e.AsyncIterableObject=e.Promises=e.DeferredPromise=e.IntervalCounter=e.TaskSequentializer=e.retry=e.IdleValue=e.runWhenIdle=e.ThrottledWorker=e.RunOnceWorker=e.ProcessTimeRunOnceScheduler=e.RunOnceScheduler=e.IntervalTimer=e.TimeoutTimer=e.ResourceQueue=e.Queue=e.Limiter=e.firstParallel=e.first=e.sequence=e.disposableTimeout=e.timeout=e.AutoOpenBarrier=e.Barrier=e.ThrottledDelayer=e.Delayer=e.SequencerByKey=e.Sequencer=e.Throttler=e.asPromise=e.raceTimeout=e.raceCancellablePromises=e.raceCancellationError=e.raceCancellation=e.createCancelablePromise=e.isThenable=void 0;function i(M){return!!M&&typeof M.then=="function"}e.isThenable=i;function r(M){const o=new E.CancellationTokenSource,S=M(o.token),P=new Promise((N,j)=>{const G=o.token.onCancellationRequested(()=>{G.dispose(),o.dispose(),j(new k.CancellationError)});Promise.resolve(S).then(H=>{G.dispose(),o.dispose(),N(H)},H=>{G.dispose(),o.dispose(),j(H)})});return new class{cancel(){o.cancel()}then(N,j){return P.then(N,j)}catch(N){return this.then(void 0,N)}finally(N){return P.finally(N)}}}e.createCancelablePromise=r;function a(M,o,S){return new Promise((P,N)=>{const j=o.onCancellationRequested(()=>{j.dispose(),P(S)});M.then(P,N).finally(()=>j.dispose())})}e.raceCancellation=a;function v(M,o){return new Promise((S,P)=>{const N=o.onCancellationRequested(()=>{N.dispose(),P(new k.CancellationError)});M.then(S,P).finally(()=>N.dispose())})}e.raceCancellationError=v;async function w(M){let o=-1;const S=M.map((P,N)=>P.then(j=>(o=N,j)));try{return await Promise.race(S)}finally{M.forEach((P,N)=>{N!==o&&P.cancel()})}}e.raceCancellablePromises=w;function h(M,o,S){let P;const N=setTimeout(()=>{P?.(void 0),S?.()},o);return Promise.race([M.finally(()=>clearTimeout(N)),new Promise(j=>P=j)])}e.raceTimeout=h;function s(M){return new Promise((o,S)=>{const P=M();i(P)?P.then(o,S):o(P)})}e.asPromise=s;class c{constructor(){this.a=null,this.b=null,this.d=null}queue(o){if(this.a){if(this.d=o,!this.b){const S=()=>{this.b=null;const P=this.queue(this.d);return this.d=null,P};this.b=new Promise(P=>{this.a.then(S,S).then(P)})}return new Promise((S,P)=>{this.b.then(S,P)})}return this.a=o(),new Promise((S,P)=>{this.a.then(N=>{this.a=null,S(N)},N=>{this.a=null,P(N)})})}}e.Throttler=c;class O{constructor(){this.a=Promise.resolve(null)}queue(o){return this.a=this.a.then(()=>o(),()=>o())}}e.Sequencer=O;class C{constructor(){this.a=new Map}queue(o,S){const N=(this.a.get(o)??Promise.resolve()).catch(()=>{}).then(S).finally(()=>{this.a.get(o)===N&&this.a.delete(o)});return this.a.set(o,N),N}}e.SequencerByKey=C;const U=(M,o)=>{let S=!0;const P=setTimeout(()=>{S=!1,o()},M);return{isTriggered:()=>S,dispose:()=>{clearTimeout(P),S=!1}}},R=M=>{let o=!0;return queueMicrotask(()=>{o&&(o=!1,M())}),{isTriggered:()=>o,dispose:()=>{o=!1}}};class y{constructor(o){this.defaultDelay=o,this.a=null,this.b=null,this.d=null,this.f=null,this.g=null}trigger(o,S=this.defaultDelay){this.g=o,this.h(),this.b||(this.b=new Promise((N,j)=>{this.d=N,this.f=j}).then(()=>{if(this.b=null,this.d=null,this.g){const N=this.g;return this.g=null,N()}}));const P=()=>{this.a=null,this.d?.(null)};return this.a=S===t.MicrotaskDelay?R(P):U(S,P),this.b}isTriggered(){return!!this.a?.isTriggered()}cancel(){this.h(),this.b&&(this.f?.(new k.CancellationError),this.b=null)}h(){this.a?.dispose(),this.a=null}dispose(){this.cancel()}}e.Delayer=y;class f{constructor(o){this.a=new y(o),this.b=new c}trigger(o,S){return this.a.trigger(()=>this.b.queue(o),S)}isTriggered(){return this.a.isTriggered()}cancel(){this.a.cancel()}dispose(){this.a.dispose()}}e.ThrottledDelayer=f;class b{constructor(){this.a=!1,this.b=new Promise((o,S)=>{this.d=o})}isOpen(){return this.a}open(){this.a=!0,this.d(!0)}wait(){return this.b}}e.Barrier=b;class m extends b{constructor(o){super(),this.f=setTimeout(()=>this.open(),o)}open(){clearTimeout(this.f),super.open()}}e.AutoOpenBarrier=m;function I(M,o){return o?new Promise((S,P)=>{const N=setTimeout(()=>{j.dispose(),S()},M),j=o.onCancellationRequested(()=>{clearTimeout(N),j.dispose(),P(new k.CancellationError)})}):r(S=>I(M,S))}e.timeout=I;function B(M,o=0){const S=setTimeout(M,o);return(0,L.toDisposable)(()=>clearTimeout(S))}e.disposableTimeout=B;function d(M){const o=[];let S=0;const P=M.length;function N(){return S<P?M[S++]():null}function j(G){G!=null&&o.push(G);const H=N();return H?H.then(j):Promise.resolve(o)}return Promise.resolve(null).then(j)}e.sequence=d;function g(M,o=P=>!!P,S=null){let P=0;const N=M.length,j=()=>{if(P>=N)return Promise.resolve(S);const G=M[P++];return Promise.resolve(G()).then(Y=>o(Y)?Promise.resolve(Y):j())};return j()}e.first=g;function l(M,o=P=>!!P,S=null){if(M.length===0)return Promise.resolve(S);let P=M.length;const N=()=>{P=-1;for(const j of M)j.cancel?.()};return new Promise((j,G)=>{for(const H of M)H.then(Y=>{--P>=0&&o(Y)?(N(),j(Y)):P===0&&j(S)}).catch(Y=>{--P>=0&&(N(),G(Y))})})}e.firstParallel=l;class A{constructor(o){this.a=0,this.d=o,this.f=[],this.b=0,this.g=new T.Emitter}get onDrained(){return this.g.event}get size(){return this.a}queue(o){return this.a++,new Promise((S,P)=>{this.f.push({factory:o,c:S,e:P}),this.h()})}h(){for(;this.f.length&&this.b<this.d;){const o=this.f.shift();this.b++;const S=o.factory();S.then(o.c,o.e),S.then(()=>this.j(),()=>this.j())}}j(){this.a--,this.b--,this.f.length>0?this.h():this.g.fire()}dispose(){this.g.dispose()}}e.Limiter=A;class z extends A{constructor(){super(1)}}e.Queue=z;class D{constructor(){this.a=new Map,this.b=new Set}async whenDrained(){if(this.d())return;const o=new Z;return this.b.add(o),o.p}d(){for(const[,o]of this.a)if(o.size>0)return!1;return!0}queueFor(o,S=n.extUri){const P=S.getComparisonKey(o);let N=this.a.get(P);return N||(N=new z,T.Event.once(N.onDrained)(()=>{N?.dispose(),this.a.delete(P),this.f()}),this.a.set(P,N)),N}f(){this.d()&&this.g()}g(){for(const o of this.b)o.complete();this.b.clear()}dispose(){for(const[,o]of this.a)o.dispose();this.a.clear(),this.g()}}e.ResourceQueue=D;class q{constructor(o,S){this.a=-1,typeof o=="function"&&typeof S=="number"&&this.setIfNotSet(o,S)}dispose(){this.cancel()}cancel(){this.a!==-1&&(clearTimeout(this.a),this.a=-1)}cancelAndSet(o,S){this.cancel(),this.a=setTimeout(()=>{this.a=-1,o()},S)}setIfNotSet(o,S){this.a===-1&&(this.a=setTimeout(()=>{this.a=-1,o()},S))}}e.TimeoutTimer=q;class ${constructor(){this.a=-1}dispose(){this.cancel()}cancel(){this.a!==-1&&(clearInterval(this.a),this.a=-1)}cancelAndSet(o,S){this.cancel(),this.a=setInterval(()=>{o()},S)}}e.IntervalTimer=$;class _{constructor(o,S){this.b=-1,this.a=o,this.d=S,this.f=this.g.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearTimeout(this.b),this.b=-1)}schedule(o=this.d){this.cancel(),this.b=setTimeout(this.f,o)}get delay(){return this.d}set delay(o){this.d=o}isScheduled(){return this.b!==-1}flush(){this.isScheduled()&&(this.cancel(),this.h())}g(){this.b=-1,this.a&&this.h()}h(){this.a?.()}}e.RunOnceScheduler=_;class K{constructor(o,S){S%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${S}ms is not a multiple of 1000ms.`),this.a=o,this.b=S,this.d=0,this.f=-1,this.g=this.h.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearInterval(this.f),this.f=-1)}schedule(o=this.b){o%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${o}ms is not a multiple of 1000ms.`),this.cancel(),this.d=Math.ceil(o/1e3),this.f=setInterval(this.g,1e3)}isScheduled(){return this.f!==-1}h(){this.d--,!(this.d>0)&&(clearInterval(this.f),this.f=-1,this.a?.())}}e.ProcessTimeRunOnceScheduler=K;class Q extends _{constructor(o,S){super(o,S),this.j=[]}work(o){this.j.push(o),this.isScheduled()||this.schedule()}h(){const o=this.j;this.j=[],this.a?.(o)}dispose(){this.j=[],super.dispose()}}e.RunOnceWorker=Q;class te extends L.Disposable{constructor(o,S){super(),this.g=o,this.h=S,this.a=[],this.b=this.B(new L.MutableDisposable),this.f=!1}get pending(){return this.a.length}work(o){if(this.f)return!1;if(typeof this.g.maxBufferedWork=="number"){if(this.b.value){if(this.pending+o.length>this.g.maxBufferedWork)return!1}else if(this.pending+o.length-this.g.maxWorkChunkSize>this.g.maxBufferedWork)return!1}for(const S of o)this.a.push(S);return this.b.value||this.j(),!0}j(){this.h(this.a.splice(0,this.g.maxWorkChunkSize)),this.a.length>0&&(this.b.value=new _(()=>{this.b.clear(),this.j()},this.g.throttleDelay),this.b.value.schedule())}dispose(){super.dispose(),this.f=!0}}e.ThrottledWorker=te,function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?e.runWhenIdle=M=>{(0,u.setTimeout0)(()=>{if(o)return;const S=Date.now()+15;M(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,S-Date.now())}}))});let o=!1;return{dispose(){o||(o=!0)}}}:e.runWhenIdle=(M,o)=>{const S=requestIdleCallback(M,typeof o=="number"?{timeout:o}:void 0);let P=!1;return{dispose(){P||(P=!0,cancelIdleCallback(S))}}}}();class ne{constructor(o){this.d=!1,this.a=()=>{try{this.f=o()}catch(S){this.g=S}finally{this.d=!0}},this.b=(0,e.runWhenIdle)(()=>this.a())}dispose(){this.b.dispose()}get value(){if(this.d||(this.b.dispose(),this.a()),this.g)throw this.g;return this.f}get isInitialized(){return this.d}}e.IdleValue=ne;async function ie(M,o,S){let P;for(let N=0;N<S;N++)try{return await M()}catch(j){P=j,await I(o)}throw P}e.retry=ie;class re{hasPending(o){return this.a?typeof o=="number"?this.a.taskId===o:!!this.a:!1}get pending(){return this.a?.promise}cancelPending(){this.a?.cancel()}setPending(o,S,P){return this.a={taskId:o,cancel:()=>P?.(),promise:S},S.then(()=>this.d(o),()=>this.d(o)),S}d(o){this.a&&o===this.a.taskId&&(this.a=void 0,this.f())}f(){if(this.b){const o=this.b;this.b=void 0,o.run().then(o.promiseResolve,o.promiseReject)}}setNext(o){if(this.b)this.b.run=o;else{let S,P;const N=new Promise((j,G)=>{S=j,P=G});this.b={run:o,promise:N,promiseResolve:S,promiseReject:P}}return this.b.promise}hasNext(){return!!this.b}async join(){return this.b?.promise??this.a?.promise}}e.TaskSequentializer=re;class se{constructor(o,S=()=>Date.now()){this.d=o,this.f=S,this.a=0,this.b=0}increment(){const o=this.f();return o-this.a>this.d&&(this.a=o,this.b=0),this.b++,this.b}}e.IntervalCounter=se;class Z{get isRejected(){return this.d}get isResolved(){return this.f}get isSettled(){return this.d||this.f}constructor(){this.d=!1,this.f=!1,this.p=new Promise((o,S)=>{this.a=o,this.b=S})}complete(o){return new Promise(S=>{this.a(o),this.f=!0,S()})}error(o){return new Promise(S=>{this.b(o),this.d=!0,S()})}cancel(){new Promise(o=>{this.b(new k.CancellationError),this.d=!0,o()})}}e.DeferredPromise=Z;var ae;(function(M){async function o(P){let N;const j=await Promise.all(P.map(G=>G.then(H=>H,H=>{N||(N=H)})));if(typeof N<"u")throw N;return j}M.settled=o;function S(P){return new Promise(async(N,j)=>{try{await P(N,j)}catch(G){j(G)}})}M.withAsyncBody=S})(ae=e.Promises||(e.Promises={}));var X;(function(M){M[M.Initial=0]="Initial",M[M.DoneOK=1]="DoneOK",M[M.DoneError=2]="DoneError"})(X||(X={}));class V{static fromArray(o){return new V(S=>{S.emitMany(o)})}static fromPromise(o){return new V(async S=>{S.emitMany(await o)})}static fromPromises(o){return new V(async S=>{await Promise.all(o.map(async P=>S.emitOne(await P)))})}static merge(o){return new V(async S=>{await Promise.all(o.map(async P=>{for await(const N of P)S.emitOne(N)}))})}constructor(o){this.a=0,this.b=[],this.d=null,this.f=new T.Emitter,queueMicrotask(async()=>{const S={emitOne:P=>this.g(P),emitMany:P=>this.h(P),reject:P=>this.k(P)};try{await Promise.resolve(o(S)),this.j()}catch(P){this.k(P)}finally{S.emitOne=void 0,S.emitMany=void 0,S.reject=void 0}})}[Symbol.asyncIterator](){let o=0;return{next:async()=>{do{if(this.a===2)throw this.d;if(o<this.b.length)return{done:!1,value:this.b[o++]};if(this.a===1)return{done:!0,value:void 0};await T.Event.toPromise(this.f.event)}while(!0)}}}static map(o,S){return new V(async P=>{for await(const N of o)P.emitOne(S(N))})}map(o){return V.map(this,o)}static filter(o,S){return new V(async P=>{for await(const N of o)S(N)&&P.emitOne(N)})}filter(o){return V.filter(this,o)}static coalesce(o){return V.filter(o,S=>!!S)}coalesce(){return V.coalesce(this)}static async toPromise(o){const S=[];for await(const P of o)S.push(P);return S}toPromise(){return V.toPromise(this)}g(o){this.a===0&&(this.b.push(o),this.f.fire())}h(o){this.a===0&&(this.b=this.b.concat(o),this.f.fire())}j(){this.a===0&&(this.a=1,this.f.fire())}k(o){this.a===0&&(this.a=2,this.d=o,this.f.fire())}}V.EMPTY=V.fromArray([]),e.AsyncIterableObject=V;class J extends V{constructor(o,S){super(S),this.l=o}cancel(){this.l.cancel()}}e.CancelableAsyncIterableObject=J;function oe(M){const o=new E.CancellationTokenSource,S=M(o.token);return new J(o,async P=>{const N=o.token.onCancellationRequested(()=>{N.dispose(),o.dispose(),P.reject(new k.CancellationError)});try{for await(const j of S){if(o.token.isCancellationRequested)return;P.emitOne(j)}N.dispose(),o.dispose()}catch(j){N.dispose(),o.dispose(),P.reject(j)}})}e.createCancelableAsyncIterable=oe}),define(W[19],p([0,1,32]),function(F,e,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.nullTokenizeEncoded=e.nullTokenize=e.NullState=void 0,e.NullState=new class{clone(){return this}equals(L){return this===L}};function k(L,n){return new E.TokenizationResult([new E.Token(0,"",L)],n)}e.nullTokenize=k;function T(L,n){const u=new Uint32Array(2);return u[0]=0,u[1]=(L<<0|0<<8|0<<11|1<<15|2<<24)>>>0,new E.EncodedTokenizationResult(u,n===null?e.NullState:n)}e.nullTokenizeEncoded=T}),define(W[33],p([0,1,18,6,4,42,12,14,43,19,23,15,7]),function(F,e,E,k,T,L,n,u,t,i,r,a,v){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultBackgroundTokenizer=e.RangePriorityQueueImpl=e.TokenizationStateStore=e.TrackingTokenizationStateStore=e.TokenizerWithStateStoreAndTextModel=e.TokenizerWithStateStore=void 0;var w;(function(y){y[y.CHEAP_TOKENIZATION_LENGTH_LIMIT=2048]="CHEAP_TOKENIZATION_LENGTH_LIMIT"})(w||(w={}));class h{constructor(f,b){this.tokenizationSupport=b,this.a=this.tokenizationSupport.getInitialState(),this.store=new c(f)}getStartState(f){return f===1?this.a:this.store.getEndState(f-1)}}e.TokenizerWithStateStore=h;class s extends h{constructor(f,b,m,I){super(f,b),this._textModel=m,this._languageIdCodec=I}updateTokensUntilLine(f,b){const m=this._textModel.getLanguageId();for(;;){const I=this.store.getFirstInvalidEndStateLineNumber();if(!I||I>b)break;const B=this._textModel.getLineContent(I),d=this.getStartState(I),g=U(this._languageIdCodec,m,this.tokenizationSupport,B,!0,d);f.add(I,g.tokens),this.store.setEndState(I,g.endState)}}getTokenTypeIfInsertingCharacter(f,b){const m=this.getStartState(f.lineNumber);if(!m)return 0;const I=this._textModel.getLanguageId(),B=this._textModel.getLineContent(f.lineNumber),d=B.substring(0,f.column-1)+b+B.substring(f.column-1),g=U(this._languageIdCodec,I,this.tokenizationSupport,d,!0,m),l=new v.LineTokens(g.tokens,d,this._languageIdCodec);if(l.getCount()===0)return 0;const A=l.findTokenIndexAtOffset(f.column-1);return l.getStandardTokenType(A)}tokenizeLineWithEdit(f,b,m){const I=f.lineNumber,B=f.column,d=this.getStartState(I);if(!d)return null;const g=this._textModel.getLineContent(I),l=g.substring(0,B-1)+m+g.substring(B-1+b),A=this._textModel.getLanguageIdAtPosition(I,0),z=U(this._languageIdCodec,A,this.tokenizationSupport,l,!0,d);return new v.LineTokens(z.tokens,l,this._languageIdCodec)}isCheapToTokenize(f){const b=this.store.getFirstInvalidEndStateLineNumberOrMax();return f<b||f===b&&this._textModel.getLineLength(f)<2048}tokenizeHeuristically(f,b,m){if(m<=this.store.getFirstInvalidEndStateLineNumberOrMax())return{heuristicTokens:!1};if(b<=this.store.getFirstInvalidEndStateLineNumberOrMax())return this.updateTokensUntilLine(f,m),{heuristicTokens:!1};let I=this.b(b);const B=this._textModel.getLanguageId();for(let d=b;d<=m;d++){const g=this._textModel.getLineContent(d),l=U(this._languageIdCodec,B,this.tokenizationSupport,g,!0,I);f.add(d,l.tokens),I=l.endState}return{heuristicTokens:!0}}b(f){let b=this._textModel.getLineFirstNonWhitespaceColumn(f);const m=[];let I=null;for(let g=f-1;b>1&&g>=1;g--){const l=this._textModel.getLineFirstNonWhitespaceColumn(g);if(l!==0&&l<b&&(m.push(this._textModel.getLineContent(g)),b=l,I=this.getStartState(g),I))break}I||(I=this.tokenizationSupport.getInitialState()),m.reverse();const B=this._textModel.getLanguageId();let d=I;for(const g of m)d=U(this._languageIdCodec,B,this.tokenizationSupport,g,!1,d).endState;return d}}e.TokenizerWithStateStoreAndTextModel=s;class c{constructor(f){this.d=f,this.a=new O,this.b=new C,this.b.addRange(new t.OffsetRange(1,f+1))}getEndState(f){return this.a.getEndState(f)}setEndState(f,b){for(;;){const I=this.b.min;if(I!==null&&I<=f)this.b.removeMin();else break}const m=this.a.setEndState(f,b);return m&&f<this.d&&this.b.addRange(new t.OffsetRange(f+1,f+2)),m}acceptChange(f,b){this.d+=b-f.length,this.a.acceptChange(f,b),this.b.addRangeAndResize(new t.OffsetRange(f.startLineNumber,f.endLineNumberExclusive),b)}acceptChanges(f){for(const b of f){const[m]=(0,n.countEOL)(b.text);this.acceptChange(new u.LineRange(b.range.startLineNumber,b.range.endLineNumber+1),m+1)}}invalidateEndStateRange(f){this.b.addRange(new t.OffsetRange(f.startLineNumber,f.endLineNumberExclusive))}getFirstInvalidEndStateLineNumber(){return this.b.min}getFirstInvalidEndStateLineNumberOrMax(){return this.b.min||Number.MAX_SAFE_INTEGER}isTokenizationComplete(){return this.b.min===null}}e.TrackingTokenizationStateStore=c;class O{constructor(){this.a=new r.FixedArray(null)}getEndState(f){return this.a.get(f)}setEndState(f,b){const m=this.a.get(f);return m&&m.equals(b)?!1:(this.a.set(f,b),!0)}acceptChange(f,b){let m=f.length;b>0&&m>0&&(m--,b--),this.a.replace(f.startLineNumber,m,b)}acceptChanges(f){for(const b of f){const[m]=(0,n.countEOL)(b.text);this.acceptChange(new u.LineRange(b.range.startLineNumber,b.range.endLineNumber+1),m+1)}}}e.TokenizationStateStore=O;class C{constructor(){this.a=[]}getRanges(){return this.a}get min(){return this.a.length===0?null:this.a[0].start}removeMin(){if(this.a.length===0)return null;const f=this.a[0];return f.start+1===f.endExclusive?this.a.shift():this.a[0]=new t.OffsetRange(f.start+1,f.endExclusive),f.start}addRange(f){t.OffsetRange.addRange(f,this.a)}addRangeAndResize(f,b){let m=0;for(;!(m>=this.a.length||f.start<=this.a[m].endExclusive);)m++;let I=m;for(;!(I>=this.a.length||f.endExclusive<this.a[I].start);)I++;const B=b-f.length;for(let d=I;d<this.a.length;d++)this.a[d]=this.a[d].delta(B);if(m===I){const d=new t.OffsetRange(f.start,f.start+b);d.isEmpty||this.a.splice(m,0,d)}else{const d=Math.min(f.start,this.a[m].start),g=Math.max(f.endExclusive,this.a[I-1].endExclusive),l=new t.OffsetRange(d,g+B);l.isEmpty?this.a.splice(m,I-m):this.a.splice(m,I-m,l)}}toString(){return this.a.map(f=>f.toString()).join(" + ")}}e.RangePriorityQueueImpl=C;function U(y,f,b,m,I,B){let d=null;if(b)try{d=b.tokenizeEncoded(m,I,B.clone())}catch(g){(0,k.onUnexpectedError)(g)}return d||(d=(0,i.nullTokenizeEncoded)(y.encodeLanguageId(f),B)),v.LineTokens.convertToEndOffset(d.tokens,m.length),d}class R{constructor(f,b){this.b=f,this.d=b,this.a=!1,this.f=!1}dispose(){this.a=!0}handleChanges(){this.g()}g(){this.f||!this.b._textModel.isAttachedToEditor()||!this.k()||(this.f=!0,(0,E.runWhenIdle)(f=>{this.f=!1,this.h(f)}))}h(f){const b=Date.now()+f.timeRemaining(),m=()=>{this.a||!this.b._textModel.isAttachedToEditor()||!this.k()||(this.j(),Date.now()<b?(0,T.setTimeout0)(m):this.g())};m()}j(){const f=this.b._textModel.getLineCount(),b=new a.ContiguousMultilineTokensBuilder,m=L.StopWatch.create(!1);do if(m.elapsed()>1||this.l(b)>=f)break;while(this.k());this.d.setTokens(b.finalize()),this.checkFinished()}k(){return this.b?!this.b.store.isTokenizationComplete():!1}l(f){if(!this.b||!this.k())return this.b._textModel.getLineCount()+1;const b=this.b.store.getFirstInvalidEndStateLineNumber();return this.b.updateTokensUntilLine(f,b),b}checkFinished(){this.a||this.b.store.isTokenizationComplete()&&this.d.backgroundTokenizationFinished()}requestTokens(f,b){this.b.store.invalidateEndStateRange(new u.LineRange(f,b))}}e.DefaultBackgroundTokenizer=R}),define(W[34],p([0,1,31,2,13,32]),function(F,e,E,k,T,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextMateTokenizationSupport=void 0;class n extends k.Disposable{constructor(t,i,r,a,v=()=>!1){super(),this.c=t,this.f=i,this.g=r,this.h=a,this.j=v,this.a=[],this.b=this.B(new E.Emitter),this.onDidEncounterLanguage=this.b.event}get backgroundTokenizerShouldOnlyVerifyTokens(){return this.j()}getInitialState(){return this.f}tokenize(t,i,r){throw new Error("Not supported!")}createBackgroundTokenizer(t,i){if(this.h)return this.h(t,i)}tokenizeEncoded(t,i,r){const a=this.c.tokenizeLine2(t,r,500);if(a.stoppedEarly)return console.warn(`Time limit reached when tokenizing line: ${t.substring(0,100)}`),new L.EncodedTokenizationResult(a.tokens,r);if(this.g){const w=this.a,h=a.tokens;for(let s=0,c=h.length>>>1;s<c;s++){const O=h[(s<<1)+1],C=T.TokenMetadata.getLanguageId(O);w[C]||(w[C]=!0,this.b.fire(C))}}let v;return r.equals(a.ruleStack)?v=r:v=a.ruleStack,new L.EncodedTokenizationResult(a.tokens,v)}}e.TextMateTokenizationSupport=n}),define(W[35],p([0,1,19,2,10]),function(F,e,E,k,T){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TokenizationSupportWithLineLimit=void 0;class L extends k.Disposable{get backgroundTokenizerShouldOnlyVerifyTokens(){return this.b.backgroundTokenizerShouldOnlyVerifyTokens}constructor(u,t,i){super(),this.a=u,this.b=t,this.c=i,this.B((0,T.keepAlive)(this.c))}getInitialState(){return this.b.getInitialState()}tokenize(u,t,i){throw new Error("Not supported!")}tokenizeEncoded(u,t,i){return u.length>=this.c.get()?(0,E.nullTokenizeEncoded)(this.a,i):this.b.tokenizeEncoded(u,t,i)}createBackgroundTokenizer(u,t){if(this.b.createBackgroundTokenizer)return this.b.createBackgroundTokenizer(u,t)}}e.TokenizationSupportWithLineLimit=L}),define(W[36],p([0,1,17]),function(F,e,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TMScopeRegistry=void 0;class k{constructor(){this.a=Object.create(null)}reset(){this.a=Object.create(null)}register(L){if(this.a[L.scopeName]){const n=this.a[L.scopeName];E.isEqual(n.location,L.location)||console.warn(`Overwriting grammar scope name to file mapping for scope ${L.scopeName}.
Old grammar file: ${n.location.toString()}.
New grammar file: ${L.location.toString()}`)}this.a[L.scopeName]=L}getGrammarDefinition(L){return this.a[L]||null}}e.TMScopeRegistry=k}),define(W[37],p([0,1,2,36]),function(F,e,E,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TMGrammarFactory=e.missingTMGrammarErrorMessage=void 0,e.missingTMGrammarErrorMessage="No TM Grammar registered for this language.";class T extends E.Disposable{constructor(n,u,t,i){super(),this.a=n,this.b=t.INITIAL,this.c=new k.TMScopeRegistry,this.f={},this.g={},this.h=new Map,this.j=this.B(new t.Registry({onigLib:i,loadGrammar:async r=>{const a=this.c.getGrammarDefinition(r);if(!a)return this.a.logTrace(`No grammar found for scope ${r}`),null;const v=a.location;try{const w=await this.a.readFile(v);return t.parseRawGrammar(w,v.path)}catch(w){return this.a.logError(`Unable to load and parse grammar for scope ${r} from ${v}`,w),null}},getInjections:r=>{const a=r.split(".");let v=[];for(let w=1;w<=a.length;w++){const h=a.slice(0,w).join(".");v=[...v,...this.f[h]||[]]}return v}}));for(const r of u){if(this.c.register(r),r.injectTo){for(const a of r.injectTo){let v=this.f[a];v||(this.f[a]=v=[]),v.push(r.scopeName)}if(r.embeddedLanguages)for(const a of r.injectTo){let v=this.g[a];v||(this.g[a]=v=[]),v.push(r.embeddedLanguages)}}r.language&&this.h.set(r.language,r.scopeName)}}has(n){return this.h.has(n)}setTheme(n,u){this.j.setTheme(n,u)}getColorMap(){return this.j.getColorMap()}async createGrammar(n,u){const t=this.h.get(n);if(typeof t!="string")throw new Error(e.missingTMGrammarErrorMessage);const i=this.c.getGrammarDefinition(t);if(!i)throw new Error(e.missingTMGrammarErrorMessage);const r=i.embeddedLanguages;if(this.g[t]){const w=this.g[t];for(const h of w)for(const s of Object.keys(h))r[s]=h[s]}const a=Object.keys(r).length>0;let v;try{v=await this.j.loadGrammarWithConfiguration(t,u,{embeddedLanguages:r,tokenTypes:i.tokenTypes,balancedBracketSelectors:i.balancedBracketSelectors,unbalancedBracketSelectors:i.unbalancedBracketSelectors})}catch(w){throw w.message&&w.message.startsWith("No grammar provided for")?new Error(e.missingTMGrammarErrorMessage):w}return{languageId:n,grammar:v,initialState:this.b,containsEmbeddedLanguages:a}}}e.TMGrammarFactory=T}),define(W[38],p([0,1,44,33,45,15,7,34,18,10,35,14]),function(F,e,E,k,T,L,n,u,t,i,r,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextMateWorkerModel=void 0;class v extends E.MirrorTextModel{constructor(s,c,O,C,U,R,y,f){super(s,c,O,C),this.m=U,this.q=R,this.s=y,this.a=null,this.b=!1,this.c=(0,i.observableValue)("_maxTokenizationLineLength",-1),this.t=new t.RunOnceScheduler(()=>this.v(),10),this.c.set(f,void 0),this.u()}dispose(){this.b=!0,super.dispose()}onLanguageId(s,c){this.q=s,this.s=c,this.u()}onEvents(s){super.onEvents(s),this.a&&this.a.store.acceptChanges(s.changes),this.t.schedule()}acceptMaxTokenizationLineLength(s){this.c.set(s,void 0)}retokenize(s,c){this.a&&(this.a.store.invalidateEndStateRange(new a.LineRange(s,c)),this.t.schedule())}u(){this.a=null;const s=this.q,c=this.s;this.m.getOrCreateGrammar(s,c).then(O=>{if(!(this.b||s!==this.q||c!==this.s||!O)){if(O.grammar){const C=new r.TokenizationSupportWithLineLimit(this.s,new u.TextMateTokenizationSupport(O.grammar,O.initialState,!1),this.c);this.a=new k.TokenizerWithStateStore(this.f.length,C)}else this.a=null;this.v()}})}v(){if(this.b||!this.a)return;const s=new Date().getTime();for(;;){let c=0;const O=new L.ContiguousMultilineTokensBuilder,C=new w;for(;;){const y=this.a.store.getFirstInvalidEndStateLineNumber();if(y===null||c>200)break;c++;const f=this.f[y-1],b=this.a.getStartState(y),m=this.a.tokenizationSupport.tokenizeEncoded(f,!0,b);if(this.a.store.setEndState(y,m.endState)){const B=(0,T.diffStateStacksRefEq)(b,m.endState);C.setState(y,B)}else C.setState(y,null);if(n.LineTokens.convertToEndOffset(m.tokens,f.length),O.add(y,m.tokens),new Date().getTime()-s>20)break}if(c===0)break;const U=C.getStateDeltas();if(this.m.setTokensAndStates(this.d,this.h,O.serialize(),U),new Date().getTime()-s>20){setTimeout(()=>this.v(),3);return}}}}e.TextMateWorkerModel=v;class w{constructor(){this.a=-1,this.b=[]}setState(s,c){s===this.a+1?this.b[this.b.length-1].stateDeltas.push(c):this.b.push({startLineNumber:s,stateDeltas:[c]}),this.a=s}getStateDeltas(){return this.b}}}),define(W[46],p([0,1,16,37,38]),function(F,e,E,k,T){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.create=e.TextMateTokenizationWorker=void 0;class L{constructor(t,i){this.f=i,this.b=Object.create(null),this.c=[],this.a=t.host;const r=i.grammarDefinitions.map(a=>({location:E.URI.revive(a.location),language:a.language,scopeName:a.scopeName,embeddedLanguages:a.embeddedLanguages,tokenTypes:a.tokenTypes,injectTo:a.injectTo,balancedBracketSelectors:a.balancedBracketSelectors,unbalancedBracketSelectors:a.unbalancedBracketSelectors}));this.d=this.g(r)}async g(t){const i=this.f.textmateMainUri,r=await new Promise((s,c)=>{F([i],s,c)}),a=await new Promise((s,c)=>{F([this.f.onigurumaMainUri],s,c)}),w=await(await fetch(this.f.onigurumaWASMUri)).arrayBuffer();await a.loadWASM(w);const h=Promise.resolve({createOnigScanner:s=>a.createOnigScanner(s),createOnigString:s=>a.createOnigString(s)});return new k.TMGrammarFactory({logTrace:s=>{},logError:(s,c)=>console.error(s,c),readFile:s=>this.a.readFile(s)},t,r,h)}acceptNewModel(t){const i=E.URI.revive(t.uri),r=i.toString();this.b[r]=new T.TextMateWorkerModel(i,t.lines,t.EOL,t.versionId,this,t.languageId,t.encodedLanguageId,t.maxTokenizationLineLength)}acceptModelChanged(t,i){this.b[t].onEvents(i)}retokenize(t,i,r){this.b[t].retokenize(i,r)}acceptModelLanguageChanged(t,i,r){this.b[t].onLanguageId(i,r)}acceptRemovedModel(t){this.b[t]&&(this.b[t].dispose(),delete this.b[t])}async acceptTheme(t,i){(await this.d)?.setTheme(t,i)}acceptMaxTokenizationLineLength(t,i){this.b[t].acceptMaxTokenizationLineLength(i)}async getOrCreateGrammar(t,i){const r=await this.d;return r?(this.c[i]||(this.c[i]=r.createGrammar(t,i)),this.c[i]):Promise.resolve(null)}setTokensAndStates(t,i,r,a){this.a.setTokensAndStates(t,i,r,a)}}e.TextMateTokenizationWorker=L;function n(u,t){return new L(u,t)}e.create=n})}).call(this);

//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/b19017cea80b6157aa8214c984a70022e77526f2/core/vs/workbench/services/textMate/browser/worker/textMate.worker.js.map
